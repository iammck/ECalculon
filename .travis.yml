language: android
env:
  global:
  - secure: IMEU4IU3TWTpl+jfNdA4gS2lj6Qje6E9FS7prDavtvoDNa2Z8msBnYIlKrf5jLaIJC5AGnzT6qsXqjNCRO0bvsdDyZ5uvm3VH8WiKInCdFiQVWn7lCsehZ6heMYvuxzCyxb1qsjo+Fb+Vziih2PhK1MjDlhdNsld1tVUO4V2vSy7RBTigD4l7MaHGKf3D8/bRdteduWQokEoJMOi7Z204CC5gmHs5AV7wVI6Qo3lkCzWeLo+vVQ7v6d1AcQFXH1kPhNfrCFrpfYIdhkMD3fbQLFE8asqGQ7oDUNmzkL0OYIiLmAqLk1JqBpYqNnfcR4y7kkyWltOBKy8CPvt5ozyeQhWPngURNUy5XtuioK6qg0PCRu/AABT/MMtuDtBDK5JhCSGTulqLogU3LcvbU+i5250KB3Y5TPcdVhZGbJLn6+qSTMP4/ID8VwgUl/buvte1SsT76BnWHIZvF0h9rkSJ2LGc0wKkbhUZFZOjvMCgmc+Pg8eA6qOBdI+h6Zv9HMD6EHH8I7SJelrYz6xUAlJJOOAiBtCeBEt8BNy1oDKToBCkyMhK7e319O94nxGs5fRHvaaQI09s4waWdZ5W5D0clIwa8hSngAhYwlEBASJDTgpd7ZLlO0yxehbCd9MF2oGnKGrlNUDpMYpCLLAbG3M4OGK9xG6kT4NTQqpQqjAH9I=
  - secure: ZQwZMKErBioWYCv1D5TFPU1qCd/LeDVo+XwvJXTjLCLN238cPL6jMOHUGwF4/1uHxwhmgJ3qWD6E3SjNThQQ1Cs19XhijUJwOmqiH6DJS4n+PitNarkiJAuFcNZHJnLebizGa9wPcSI6RXmh8evW6TD7WEMFRrs6eXhoqflkSh3fkXfRmsCeVx0SdzP0BnR74CZmh4RBwusz5Xio0ZOwAy08U7Y6h+dTTPZ7HMPjTwr7RtiWTID/IuUJhXWsGax+MfOzB4YW+2FeQM4s/bk8fS4dqR94bUs4llOHj50OZth9h56wTtvXQdaRI/rKaks9n1DBUAGcGu9WZSf98dLpb5V7Y0FdSDA2/D3reywe9LssHscPgPXTEgPhAwMCse3UNeCeUs9+LhrhVgRl0ab3qVoWOkYbWnadXY1ZdvjopzxwPWqunOUG/SOoSA+v5IsOo5Un7RDK5jFkMJlajI5R7JHcL9DSX6MDovdmOLiM9U3kfISdh0kik/rOSRZ3ZTi+hSoOB3hfg4a2Vt1S5gV3raa8aY4dWF6xl8H8mwT0OILCUSbZurbMJrYk/8RwohvwagsflqEWDgaNHHgZdrzUSTZM7yzF4QK7Ag4Wmy3k9Elq6lXxXD9ne2DsIL6eL80B1EyMaWruIaENSZ1EQeBV5sVAkUuZeffgHIT06EsB2/8=
  - secure: U/5eHlKhF8OjZWZokXdIWv1Wj4V2LYdOIAjs10i0pzU/0wR3mDpLqIUGYEYYQ9V8RToq1yHg04l7sFhnKNKf+c8pdJhVTtB6clixbWtrBdYq50WijIPrqKpEyVJnPKMYvG4rDrGXNR4q62ZlHMieJbtc7/9j5c8l/4bXY71YJf6iTH1gCUqbqYKq04+gW2bHZQs+EtnPBe3oujxOiT2nsoT2Xc4ahsgugQgQXMqKcPsVt4bl+CUZV36+xHtRAEy6V81pYoJE44ZNXhVgkH4i+vDVLWbaMocvRadtQGqRpwI6M3q73XqJssrOWSUH1Lfn+JIDO7xzZ4ZXJ0hKqNx8TyreiqnquPBA/zWz0VAxhqKdflo+0T96hiWi3oS98UFgdlbqXXp+pFfGIvXr+/isQoMoXMVwWy/3y0UEwyCefgj7Yoryjzwepu97AFEy2+fYMKYwZ59uk2mErwM2lFAT3ekjgLEHGmV3hKSYqnED37RttiVQNNLOe0147+t5zptquqfNivLTlmfIemd3G5ZSx25z+GY6IrHFN1BVr0+44mDitA7k5zd/yMy3b7KMkQydTv6w9Ah5PmU0ETkxYUTTnnZl9wO2Cgz6+BCxhLxqN5Q/+IhBtzFLgfjcJj1geBB57UFnO/2Ze9wcfBZUmvtJytOxIESkDEDgPgaI4XCpvNY=
  - secure: c8ey1bTWInV5gN/FFl8FbRzvbCwGH0inmtRyIBPBdtg62qSgkb7tUcGCYoEnyIjhVho1dcpzeKP1Na9EVNig2Bs0+pClDExQu3ULI+lAVuWhB532BM+eCOuh/ajCGsHFdxrZQRn3P1eL/EXype78/5LnbT2vxaq2Y7cHL6jX2dVL2xV0oqihuZWC0bIy/fvVsWMDmcdVcV935avQefsnwYNE+qKVibH134UAlcP1935U92O77Hqpw6x6YaWrnDMqEmroIOw5HZsq4s+VElVH09hJj/8kUoiWFPo6saJlJsgpwjuANBVVCE8aQqKo9fSIOCAnXnxdgMqv9UGz36YsdINbySTxbX5vY6j5qRG2Y9AFaue+JCMWkCC7V6i3gg57c4wXa9cgMs2Cs2kfczvCd9a3TFWYr9DjltMiQrKFHd+jp6LqbUZiR13e3XRepC1hMCSgC3q9kMX2pFDIWeHnHKRa6L5UKdYtL/vJoALqNObhRi2lUl1Ad9mxN4YmufVkVGlyj6MSa8MqWUf+5O4XuBH6TsoNrjZkRbNWUVW3CSJZ+qocXs+TmrsF794cGhzHq2aSQmobKjTYW4dZFjrfi/2EbPBrhaAeAYhMLZWtuLb1ddHNFIe/uKvz+16rSpLF19xlKXQTEhKxT2NatMGHMUu3DWcRrXsm3FLd4Vd0GzQ=
  - secure: XEeEnbHK9IuU+Q3yowBVw48djkYHh7zBg0QAMyXQC7uyIKJApH+yzXl5zUFdSbIRTDuXfs+WVSwuDQrxOW6NHkKSLFcnjh7YZuRkh8UZPwHkvpexTLclW9spgd5KDrOh5aMi1crqZkr2j0Yk21viCgHDfpA85NHvckqOjlttrtpMcL4JhC/Ms94btfn+oiHhaSSjI0UascYalh/66/+LygraypbPP5hI0SoatZwPiU35gzFMZOvn5LVpOJlaCfd7Iy6CCK9Q65Vs1RnxsldKDaPxw4BPJbAlRD4LV4Y++oBQfA6SVBSoiQZJc585uzT6KyYgxLjwZFu3pnVUDlBwmrursvXE2YvqA24dR9v8Al+mVlTvBebq47nqE8w+7PIe35DAlgKQ3NVPN/uXl84dhyFInsr40yQPtUbeADiIxGKZB7jkzdVjVSDi5B7tpqR7IoifrDGXYS4NgTNXiy9huxXAEe3mU5Tcd/qlc28arQPDQ9yxQ6ceYaCtW/keCgEwNE5SwTlzv9EfgSurkfqLjgZ2pa+0iw0yFP2p4GkFUTzHrDL2bB30fGpvOWuCLxjZkx7QAAx7xtKsEYD9lMRGn2MkFwA/sEKCX0MVrfqCbDX/4xfxb7VKNmqM9WoZ3UoruHKGv4vTwK/j3jsm9a1iKL0Xvgmk0TjFqN6+npStH4Y=
  - secure: KCwC2pReAl8etJ9pvBFrmQht4sZIu+rsL1kd54fJLfOo8DpM96UowvmEfvNBq8cg9/IjZQol3fwlFC4Dt38Aio+zGULNE+tqkSERUO1FA/8vG6UoLgIRmLP6csyupnJplGoh3WYNLMdc18fS14pubTKgQeo8Ns7hLwj1r3tfIIc8dmxAp2W67XWZtAax7KAsvTgJKyKy5LNAGw09JH7GqcZp5tlx04Be/U5Ouq2BcSPyiVvpR5VLE62uN21nYMHW4pWf4SgIP4FVpwej/2TOcRjBCcULG7xEr6R/7K79Xhvsc+RDKqZts6jxso1pEqoyyKz4dhhZXPQWwwcvp99ui162aElNYA6Yj/0jI7yKLX8WSTUDRnBswkYeiwGyWpTKtpdZatexuoko6aQCNI5Eg0GKfrQXEXYKWYYuFWHGCr2NvQv/2D54771rM4BSmFlCxvigKbzReAZ5PPfPwnUawYtzsUhqsp9EHKvFDivCZLAmhlGB8ivD9qEhfmfYyvV2ejWOLSDcUkmu5/roKCmyBomYXvIJzZlJLDDs1R7wRm0zJ1EjP+HrPE2YJC/NWGZCCfHXZuxDXvr9S0+KflIwn4u6tYmltT2/J2OAM0zWS0U4NNu1B9EHqLG0NCO0myBv9QBh2LuiRag2ieeV3P9VJ2vPGyJgLrQmOpbJYGJS73I=
  - secure: USBFXzMzqf0HvVd+ik5MVGEpaq5Z3OVXSiBG1gyOtA79R6j4ng1dpJ+iieh50wzoydqGbcmkbZ9gxj1GEuskezzcZMbCEoe/zdskpxnBtYsU6RLrxTYH2vn8GZ+0m0kZ2w2Hd3VsA5XHY0nFfDFYKtlvsKMgEs8sYBHhYLGyngqbsnDEnK89gdl2A7TeOCRo4wfW/SscDejfiK1RyI9DRfBeDnEZXyT979jjECoJOLsobGIOkxaTXE4HMfVuuc68/bxmwAhTqaAjkm1vmJvvaxk7qCJYis5PQXi0srVRhFFlvAz/i2I97BPYZ/e25jIIZOj/W3ZWtcxMYzayA92UM2cqVniCGsSvOjF0UA3hMRXdTd7BzHq6og0yXLUFXztdvHVRM+k2fl5ylQVJTSAij8zdstbWShT1Phx4eQS1bQUHnPwSmSarNcMGSSuPZGT6c6EeGFGFEdBX9kbEOmX2RCOSX8f+ddUQkYY2/U8pGoCGGuPkpqHovN2PaKjzITLNDxrd9hCSJg38E3ha+utgK16fTUu6mMplx9c/pBF52ETTDjvSvgSs8NGReOBk1YYdlSjDUad/fYTbRGYHIxJEOLfnV7ih4ZbOIZc4LGT94rvjw5KtpFW3Wa2IU5jL8p6FdS+e3DWIwtQnz9HdeYk8IRzXs4L2+jzUtM65OmKhYqo=
  - secure: N44ktSedTImLVpUXzm2e2FmQXKmWWZ2bmlgH1lAX2l3mq5ckgAR3hvH39X5Rxak8ByCk0wJ+DJg/Pf3qg9a1nGDGoHFSUE7a+/bBgfsQJU80Z/PbEbKYDs0UXQU0OmjuYwPYGwS8coI+GU7Ryl53qANfntNee5CGtlItYiJ3gXiB8N78ibqQMkapPK060XF9pnE/gCfeyRL+G9cClZnUR+nCMmuY2KMHpNJNq1aCLeG7p9UeQXCQfcSLaOQP1dTopZ5HxEYw26gXiBPnd7YFjXIOZSFi2hFVs43fVm/210VDlv7E60KLhbCscRRWuhZUFYM7D5jI93Tsbb9hh/FObb3YPJE1J/O6jjh4TQsAAr4KkNynJhb/v87d1a3eIs0yyi4fwX1/ViwTFlz/aiWqSXqYk5SyZa7VArlrSgqHXVDLXpY/t5Oakqrb00OnLtaMna/QcLE0ewDy6mS5DpVCKBgc0UJPXqUMkKuPhHxr5S5RZfrziXb3IUH+GTB1F1iVDvE9U2fhdo3AXo6IMLFY+x6N8PKWgJ8BEVexA/EBbN8BAvYyOOkb4A918R4FByXj73wxBqAFVEgBGapxTO0KfmMBC8xkc3CLkUfXE/o6SQsuwPV9/gf/v17yaRbzMWMJdjreJ0BltSN1nkacOXpbbXVN0FARIpGHl20Iht1jNAI=
android:
  components:
  - build-tools-21.1.2
  - android-22
  - extra-android-support
  - sys-img-armeabi-v7a-android-19
before_install:
- openssl aes-256-cbc -k "$dkspwd" -in app/keystore/ecalculon.keystore.enc -out app/keystore/ecalculon.keystore
- openssl aes-256-cbc -k "$p12pwd" -in app/keystore/p12.json.enc -out app/keystore/p12.json
  -d
- chmod +x gradlew
- echo yes | android update sdk --filter extra-android-support --no-ui --force > /dev/null
- echo yes | android update sdk --filter extra-android-m2repository --no-ui --force
  > /dev/null
after_success:
- TERM=dumb ./gradlew tasks
- TERM=dumb ./gradlew publishRelease
before_script:
- echo no | android create avd --force -n test -t android-19 --abi armeabi-v7a
- emulator -avd test -no-skin -no-audio -no-window &
- android-wait-for-emulator
- adb shell input keyevent 82 &
